<div *ngIf="issloading==false">
  <mat-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Seleccione el proyecto</ng-template>
        <mat-card class="example-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Proyectos</mat-card-title>
            <mat-card-subtitle>Seleccione el proyecto</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>Seleccione el proyecto</p>
            <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
              <mat-selection-list #shoes [multiple]="false" formControlName="firstCtrl" (selectionChange)="selectProyecto($event)">
                <mat-list-option *ngFor="let shoe of anexo4" [value]="shoe">
                  {{shoe.nombreProyecto}}
                </mat-list-option>
              </mat-selection-list>

            </cdk-virtual-scroll-viewport>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="primary" matStepperNext>Siguente</button>
          </mat-card-actions>
        </mat-card>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="Actividades">
      <form [formGroup]="secondFormGroup">
        <mat-card style="width: 95%;margin: 0 auto">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Actividades</mat-card-title>
            <mat-card-subtitle>Describa las actividades</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-grid-list cols="3" rowHeight="2:1">
              <div *ngFor="let row of secondFormGroup.get('rows')?.controls;let index = index;">
                <mat-grid-tile>
                  <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
                    <mat-label>ACTIVIDADES GENERALES</mat-label>
                    <input matInput [formControl]="row.get('actividadesGenerales')" readonly>
                  </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                  <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
                    <mat-label>ACTIVIDADES ESPECÍFICAS </mat-label>
                    <textarea matInput [formControl]="row.get('actividadesEspecificas')"></textarea>
                  </mat-form-field>
                </mat-grid-tile>
                <mat-grid-tile>
                  <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
                    <mat-label>PRODUCTO GENERADO</mat-label>
                    <textarea matInput [formControl]="row.get('productoGenerado')"></textarea>
                  </mat-form-field>
                </mat-grid-tile>
              </div>
            </mat-grid-list>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="warn" matStepperPrevious>Regresar</button>
            <button mat-raised-button color="primary" matStepperNext>Siguente</button>
          </mat-card-actions>
        </mat-card>
      </form>
    </mat-step>
    <mat-step [stepControl]="thirdFormGroup">
      <form [formGroup]="thirdFormGroup">
        <ng-template matStepLabel>Descripción de la empresa y conclusiones</ng-template>
        <mat-card  style="width: 50%;margin: 0 auto">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Empresa y conclusiones</mat-card-title>
            <mat-card-subtitle>Datos</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
              <mat-label>Teléfono</mat-label>
              <input matInput formControlName="tele" [(ngModel)]="anexo10.telefonoEstudiante">
            </mat-form-field>
            <mat-form-field appearance="fill" style="width: 100%">
              <mat-label>DESCRIPCIÓN DE LA EMPRESA/INSTITUCIÓN</mat-label>
              <textarea matInput formControlName="descrip" [(ngModel)]="anexo10.descripcionEmpresa"></textarea>
            </mat-form-field>
            <mat-form-field appearance="fill" style="width: 100%">
              <mat-label>CONCLUSIONES </mat-label>
              <textarea matInput formControlName="conclu" [(ngModel)]="anexo10.conclusiones"></textarea>
            </mat-form-field>
            <mat-form-field appearance="fill" style="width: 100%">
              <mat-label>RECOMENDACIONES </mat-label>
              <textarea matInput formControlName="recome" [(ngModel)]="anexo10.recomendaciones"></textarea>
            </mat-form-field>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="warn" matStepperPrevious>Regresar</button>
            <button mat-raised-button color="primary" matStepperNext>Siguente</button>
          </mat-card-actions>
        </mat-card>
      </form>
    </mat-step>
    <mat-step [stepControl]="fourFormGroup">
      <form [formGroup]="fourFormGroup">
        <ng-template matStepLabel>Documento</ng-template>
        <mat-card  style="width: 50%;margin: 0 auto">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>Anexo 10</mat-card-title>
            <mat-card-subtitle>Obtener anexo 10</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <h4>Debe obtner el anexo en "Obtener Anexo" y posteriormente debera firmar y subir de en formato PDF</h4>
            <div>
              <button mat-raised-button color="primary" (click)="generarDocumento()">Obtener Anexo</button>
              <mat-form-field appearance="outline" style="width: 75%; margin-left: 10px" >
                <ngx-mat-file-input accept="application/pdf" (change)="subirDocumento($event.target.files)" formControlName="docx" placeholder="Subir Documento"></ngx-mat-file-input>
                <mat-icon matSuffix>folder</mat-icon>
              </mat-form-field>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="warn" matStepperPrevious>Regresar</button>
            <button mat-raised-button color="primary" matStepperNext>Siguente</button>
          </mat-card-actions>
        </mat-card>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Confirmación</ng-template>
      <mat-card class="example-card">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>Confirmación</mat-card-title>
          <mat-card-subtitle>Resumen:</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          Guardar anexo 10
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button color="warn" matStepperPrevious>Regresar</button>
          <button mat-raised-button color="accent" (click)="guardarInforme()">GUARDAR INFORME</button>
        </mat-card-actions>
      </mat-card>
    </mat-step>
  </mat-stepper>
</div>
<ng-container *ngIf="issloading">
  <div class="bss-loader" style="margin: auto;">
    <center>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </center>
  </div>
</ng-container>
