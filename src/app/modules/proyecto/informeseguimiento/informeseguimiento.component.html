<div *ngIf="issloading == false">
  <mat-stepper mat-stepper orientation="vertical" [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Seleccionar Proyecto</ng-template>
        <mat-card class="example-card">
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-subtitle>INFORME DE SEGUIMIENTO</mat-card-subtitle>
          <mat-card-title>INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY</mat-card-title>
          <mat-card-title>COORDINACIÓN DE VINCULACIÓN CON LA SOCIEDAD</mat-card-title>
        </mat-card>
        <mat-card-content>
          <div id="contenedor">
            <div id="cabecera">
              <mat-form-field appearance="outline" style="width: 90%">
                <mat-label>BUSCAR...</mat-label>
                <input matInput placeholder="FILTRAR" [formControl]="myControl">
                <mat-icon matSuffix>search</mat-icon>
              </mat-form-field>
              <cdk-virtual-scroll-viewport appendOnly itemSize="40" class="example-viewport1">
                <mat-selection-list #shoes [multiple]="false" (selectionChange)="selectionProyecto($event)"
                                    formControlName="proyecto">
                  <mat-list-option *ngFor="let option of filteredOptions | async" [value]="option" >
                    Proyecto: {{option.nombre}} Director de Proyecto:{{option.nombredirector}}
                  </mat-list-option>
                </mat-selection-list>
              </cdk-virtual-scroll-viewport>
              <br>
              <p style="font-size: medium">
                <strong>Proyecto Seleccionado: </strong>{{proyectoSelect.nombre}}
              </p>
            </div>
          </div>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="1 DATOS INFORMATIVOS DEL PROYECTO">
      <form [formGroup]="secondFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORMACIÓN DEL PROYECTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-card class="example-card">
            <mat-list>
              <mat-list-item>
                <strong> Programa de Vinculación:  </strong>{{proyectoSelect.programaVinculacion}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Línea de acción: </strong> {{proyectoSelect.lineaaccion}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Nombre del Proyecto: </strong> {{proyectoSelect.nombre}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Carrera: </strong> {{carreraSelect.nombre}}</mat-list-item>
              <mat-divider></mat-divider>
            </mat-list>
          </mat-card>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="thirdFormGroup" label="DOCENTES PARTICIPANTES">
      <form [formGroup]="thirdFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORME DE SEGUIMIENTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-grid-list cols="3" rowHeight="6:1.10" [formGroup]="thirdFormGroup">
            <div style="margin-top: 15px">
              <h3>1.5 Equipo de Trabajo</h3>
              <br>
              <br>
              <div>
                <h3>DOCENTES PARTICIPANTES</h3>
                <mat-grid-tile colspan="3" *ngFor="let row of thirdFormGroup.get('rows')?.controls;let index = index;">
                  <!--Carga de lista de nombres-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>Nombres y Apellidos</mat-label>
                    <input matInput type="text" [formControl]="row.get('nombres')"
                           placeholder="Nombre completo" [required] readonly>
                  </mat-form-field>
                  <!--Carga de lista de estudiantes-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>No. Cédula</mat-label>
                    <input matInput [formControl]="row.get('cedula')"
                              placeholder="9999......." [required] readonly>
                  </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>Carrera</mat-label>
                    <input matInput [formControl]="row.get('carrera')"
                           placeholder="Carrera" [required] readonly>
                  </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>Número total de horas de Vinculación</mat-label>
                    <input matInput [formControl]="row.get('numeroHoras')"
                           placeholder="60" [required] readonly>
                  </mat-form-field>
                </mat-grid-tile>
              </div>
            </div>
          </mat-grid-list>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="fourFormGroup" label="ESTUDIANTES PARTICIPANTES">
      <form [formGroup]="fourFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORME DE SEGUIMIENTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-grid-list cols="3" rowHeight="6:1.10" [formGroup]="fourFormGroup">
            <div style="margin-top: 15px">
              <h3>1.5 Equipo de Trabajo</h3>
              <br>
              <br>
              <div>
                <h3>ESTUDIANTES PARTICIPANTES</h3>
                <mat-grid-tile colspan="3" *ngFor="let row of fourFormGroup.get('rowsEst')?.controls;let index = index;">
                  <!--Carga de lista de nombres-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>Nombres y Apellidos</mat-label>
                    <input matInput type="text" [formControl]="row.get('nombres')"
                           placeholder="Nombre completo" [required] readonly>
                  </mat-form-field>

                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>No. Cédula</mat-label>
                    <input matInput [formControl]="row.get('cedula')"
                           placeholder="9999......." [required] readonly>
                  </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                   <mat-label>Carrera</mat-label>
                   <input matInput [formControl]="row.get('carrera')"
                          placeholder="Codigo Carrera" [required] readonly>
                 </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                     <mat-label>Número total de horas de Vinculación</mat-label>
                    <input matInput [formControl]="row.get('numeroHoras')"
                           placeholder="60" [required] readonly>
                   </mat-form-field>
                </mat-grid-tile>
              </div>
            </div>
          </mat-grid-list>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="fiveFormGroup" label="DATOS INFORMATIVOS DEL PROYECTO">
      <form [formGroup]="fiveFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORMACIÓN DEL PROYECTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-card class="example-card">
            <mat-list>
              <mat-list-item><strong>1.6 Entidad Beneficiaria:  </strong>{{entidadSelect.nombre}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>1.7 Plazo de Ejecución del Proyecto </strong> </mat-list-item>

              <mat-list-item><strong>Fecha de Inicio de Proyecto: </strong> {{proyectoSelect.fechaInicio}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Fecha de fin planeado: </strong> {{proyectoSelect.fechaFin}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Fecha de seguimiento: </strong>{{fecha | date:'mediumDate'}} </mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>Fecha de inicio real: </strong><input type="date" formControlName="fecha" [(ngModel)]="informe.fechaInicioReal " [min]="proyectoSelect.fechaInicio"></mat-list-item>
              <mat-divider></mat-divider>
              <br>
              <br>
              <mat-list-item><strong>Fecha de fin real: </strong><input type="date" formControlName="fecha" [(ngModel)]="informe.fechaFinReal" [min]="informe.fechaInicioReal">
                 </mat-list-item>
              <mat-divider></mat-divider>
            </mat-list>
          </mat-card>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="sixFormGroup" label="2 RESUMEN DEL PROYECTO">
      <form [formGroup]="sixFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORMACIÓN DEL PROYECTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-card class="example-card">
            <mat-list>
              <mat-list-item><strong>2.1 Alcance territorial del proyecto: </strong>{{proyectoSelect.alcanceTerritorial}}</mat-list-item>
              <mat-divider></mat-divider>
              <mat-list-item><strong>2.2 Objetivo General: </strong> {{proyectoSelect.objetivoGeneral}}</mat-list-item>
              <mat-divider></mat-divider>

            </mat-list>
          </mat-card>
          <mat-grid-list cols="3" rowHeight="6:1.10" [formGroup]="sixFormGroup">
            <div style="margin-top: 15px">

              <br>
              <br>
              <div>
                <h3>Objetivos Especificos</h3>
                <mat-grid-tile colspan="3" *ngFor="let row of sixFormGroup.get('rowsObje')?.controls;let index = index;">
                  <!--Carga de lista de nombres-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>Objetivos</mat-label>
                    <input matInput type="text" [formControl]="row.get('descripcion')"
                           placeholder="Descripcion" [required] readonly>
                  </mat-form-field>


                </mat-grid-tile>
              </div>
            </div>
          </mat-grid-list>
          <br>
          <mat-label><strong>Situación al inicio de la ejecución del proyecto </strong></mat-label>
          <br>
          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label> <strong>Situación inicial </strong></mat-label>
            <textarea   matInput formControlName="situacion" [(ngModel)]="informe.situacionInicio" name="situacionInicial" ></textarea>
          </mat-form-field>
          <br>
          <mat-label><strong>Situación actual de los beneficiarios </strong></mat-label>
          <br>
          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label><strong>Situación actual</strong></mat-label>
            <textarea   matInput formControlName="situacion" [(ngModel)]="informe.situacionActual" name="situacionActual" ></textarea>
          </mat-form-field>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="sevenFormGroup" label="ACTIVIDADES DEL PROYECTO">
      <form [formGroup]="sevenFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORME DE SEGUIMIENTO</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-grid-list cols="3" rowHeight="6:1.10" [formGroup]="secondFormGroup">
            <div style="margin-top: 15px">
              <h3><strong>2.6 Descripción de las actividades realizadas durante la ejecución del proyecto</strong></h3>
              <br>
              <br>
              <div>
                <mat-grid-tile colspan="3" *ngFor="let row of sevenFormGroup.get('rowsInfo')?.controls;let index = index;">
                  <!--Carga de lista de actividades-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label><strong>Actividades</strong></mat-label>
                    <input matInput type="text" [formControl]="row.get('actividades')"
                           placeholder="Actividades" [required] readonly>
                  </mat-form-field>
                  <mat-form-field class="example-full-width" appearance="outline" style="width: 180px">
                    <mat-label><strong>Porcentaje Cumplimiento (%)</strong>{{index}}</mat-label>
                    <input matInput type="number" min="0" max="100" [formControl]="row.get('porcentajeCumplimiento')"
                           placeholder="Avance de la Actividad (%)" [required]>
                  </mat-form-field>
                  <mat-form-field class="example-full-width" appearance="outline" style="width: 180px">
                    <mat-label><strong>Fecha de Ejecución</strong>{{index}}</mat-label>
                    <input matInput type="date"  [formControl]="row.get('fechaEjecucion')"
                            [required] readonly>
                  </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label><strong>Responsable de la Ejecución</strong></mat-label>
                    <input matInput type="text" [formControl]="row.get('responsableEjecucion')"
                           placeholder="Responsable" [required] readonly>
                  </mat-form-field>
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label><strong>Documento de Evidencia</strong></mat-label>
                    <input matInput type="text" [formControl]="row.get('documento')"
                           placeholder="Referencia de anexo adjuntado" [required]>
                  </mat-form-field>
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label><strong>Observaciones</strong></mat-label>
                    <textarea matInput type="text" [formControl]="row.get('observaciones')"  placeholder="Observaciones" [required]></textarea>
                  </mat-form-field>
                  <span class="example-spacer"></span>
                </mat-grid-tile>
              </div>
            </div>
          </mat-grid-list>

        </mat-card-content>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>

        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="eigthFormGroup" label="3CONCLUSIONES Y OBSERVACIONES">
      <form [formGroup]="eigthFormGroup">

        <mat-card-content>


          <mat-label><strong>3.1 Conclusiones</strong></mat-label>
          <br>
          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label><strong>Conclusiones</strong></mat-label>
            <textarea   matInput [(ngModel)]="informe.conclusiones" name="conclusiones" [ngModelOptions]="{standalone: true}"
            placeholder="Describir las enseñanzas aprendidas hasta la fecha de elaboración del informe"></textarea>
          </mat-form-field>
          <br>
          <mat-label><strong>3.2 Observaciones</strong></mat-label>
          <br>
          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label>Observaciones</mat-label>
            <textarea   matInput [(ngModel)]="informe.observacionesInformeSeguimiento" name="observacionesInformeSeguimiento" [ngModelOptions]="{standalone: true}"
            placeholder="Exponer las diferentes dificultades que se presentaron durante la ejecución del proyecto:
- Cambios generados con el número de estudiantes participantes.
- Problemas generados para iniciar o finalizar el proyecto en las fechas aprobadas
- Cambio de docentes a cargo de estudiantes, etc."></textarea>
          </mat-form-field>
          <br>


          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label>Fecha Entrega</mat-label>
            <input type="date"   matInput [(ngModel)]="informe.fechaEntrega" formControlName="fechaEn" [min]="informe.fechaInicioReal">
          </mat-form-field>

        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="nineFormGroup" label="Documento">
      <form [formGroup]="nineFormGroup">
        <mat-card class="example-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title><br><br> INFORME DE SEGUIMIENTO</mat-card-title>
            <mat-card-subtitle><br />
              PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br />
              INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br />
            </mat-card-subtitle>
          </mat-card-header>
          <h4>Debe obtener el anexo en "Obtener Anexo" y posteriormente debera firmar y subir de en formato PDF</h4>
          <div>
            <button mat-raised-button color="primary" (click)="generarDocumento()">Obtener Anexo</button>
            <mat-form-field appearance="outline" style="width: 75%; margin-left: 10px" >
              <ngx-mat-file-input accept="application/pdf"  (change)="subirDocumento($event.target.files)"  formControlName="docx" placeholder="Subir Documento"></ngx-mat-file-input>
              <mat-icon matSuffix>folder</mat-icon>
            </mat-form-field>
          </div>
          <mat-card-content>
            <div>
              <button mat-button matStepperPrevious color="primary">Atras</button>
              <button mat-button matStepperNext color="warn">Siguente</button>
            </div>
          </mat-card-content>
        </mat-card>
      </form>
    </mat-step>
    <!--<mat-step  label="Confirmar">
      <mat-card class="example-card">
        <mat-card-header style="align-content: center">
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title><br><br> INFORME DE SEGUIMIENTO</mat-card-title>
          <mat-card-subtitle><br />
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br />
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br />
          </mat-card-subtitle>
          <mat-card-subtitle>GUARDAR INFORME DE SEGUIMIENTO </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>

          <div>
            <button mat-button matStepperPrevious color="primary">Atras</button>
            <button mat-flat-button color="warn" (click)="guardarAnexo()">GUARDAR</button>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-step>-->
    <mat-step  label="CONFIRMAR">
      <mat-card style="width: 600px;margin: 0 auto">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>Informe de Seguimiento</mat-card-title>
          <mat-card-subtitle>Guardar Informe de Seguimiento </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div>
            <button mat-button matStepperPrevious color="primary">Atras</button>
            <button mat-flat-button color="warn" (click)="guardarAnexo()">GUARDAR</button>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-step>
  </mat-stepper>
</div>
